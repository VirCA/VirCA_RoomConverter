<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta charset="utf-8" />
    <title>VirCA Room Converter</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <link rel="stylesheet" href="css/jstree/dist/themes/default/style.css">
    <script src="css/jstree/dist/jstree.min.js"></script>
    <link rel="stylesheet" href="settingsStyle.css">
</head>
<body>
    <header>
        <p class="centered" id="page-title"><font size="8" color="white"> VirCA Room Converter</font></p>
        <p>On this page, you can modify your room properties. You can select each tag you would like to, and change it's value. After you finish, you need to click on "Submit" and after the "Download " button to get your room file.</p>
    </header>
    <div>
        <div class="plane">
            <p class="centered"> Select the property you would like to change</p>
            <div id="jstree"></div>

        </div>

        <div class="plane">

            <p class="centered">
                The Selected Property
            </p>
            <div class="settings-zone">
                <!--FIRST-->
                <div id="RN" class="first hidden">
                    <label>Room name:</label>
                    <input class="tex" type="text" id="roomName" value=""><br>
                </div>
                <div id="settings">
                    <!--FIRST-->
                    <div id="environment" class="first hidden">
                        <label>Environment:</label><br>
                        <div id="skybox" class="second">
                            <label>Skybox</label>
                            <div class="third">
                                <label> Material Name:</label>
                                <input class="tex" type="text" id="environment_skybox_materialName" value=""><br>
                                <label> Distance:</label>
                                <input class="tex" type="text" id="environment_skybox_distance" value=""><br>
                            </div>
                        </div>
                        <div id="environment_ambientColor" class="second">
                            <label>Ambient Color:</label>
                            <div class="third">
                                <label>r: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_ambientColor_r"><br>
                                <label>g: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_ambientColor_g"><br>
                                <label>b: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_ambientColor_b"><br>
                                <label>a: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_ambientColor_a"><br>
                            </div>
                        </div>
                        <div id="environment_backgroundColor" class="second">
                            <label>Background Color:</label>
                            <div class="third">
                                <label>r: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_backgroundColor_r"><br>
                                <label>g: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_backgroundColor_g"><br>
                                <label>b: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_backgroundColor_b"><br>
                                <label>a: </label>
                                <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_backgroundColor_a"><br>
                            </div>
                        </div>
                        <div class="second ">
                            <label>Runtime Shader System:</label>
                            <select class="tex" id="environment_runtimeShaderSystem">
                                <option value="default"></option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select>
                        </div>
                        <div id="shadow" class="second ">
                            <label>Shadow:</label>
                            <select class="tex" id="environment_shadow">
                                <option value="default"></option>
                                <option value="NONE">NONE</option>
                                <option value="DAVE">DAVE</option>
                                <option value="STENCIL">STENCIL</option>
                            </select>
                        </div>
                        <div class="second">
                            <label>Compositors</label>
                            <div class="third">
                                <label> Bloom:</label>
                                <select class="tex" id="environment_compositors_bloom">
                                    <option value="default"></option>
                                    <option value="true">True</option>
                                    <option value="false">False</option>
                                </select><br>
                                <label> Motion Blur:</label>
                                <select class="tex" id="environment_compositors_motionBlur">
                                    <option value="default"></option>
                                    <option value="true">True</option>
                                    <option value="false">False</option>
                                </select>
                            </div>
                        </div>
                        <div id="fog" class="second">
                            <label>Fog:</label>
                            <div class="third">
                                <label>Type:</label>
                                <select class="tex" id="environment_fog_type">
                                    <option value="default"></option>
                                    <option value="NONE">NONE</option>
                                    <option value="LINEAR">LINEAR</option>
                                    <option value="EXP">EXP</option>
                                    <option value="EXP2">EXP2</option>
                                </select><br>
                                <label>Color:</label>
                                <div class="fourth">
                                    <label>r: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_fog_color_r"><br>
                                    <label>g: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_fog_color_g"><br>
                                    <label>b: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_fog_color_b"><br>
                                    <label>a: </label>
                                    <input class="nums" type="number" min="0" max="1" step="0.01" id="environment_fog_color_a"><br>
                                </div><br>
                                <label>Linear Start:</label>
                                <input class="nums" type="number"  id="environment_fog_linearStart" value="0.0"><br>
                                <label>Linear Stop:</label>
                                <input class="nums" type="number"  id="environment_fog_linearStop" value="0.0"><br>
                                <label>Exp Density:</label>
                                <input class="nums" type="number"  id="environment_fog_expDensity" value="0.0"><br>

                            </div>

                        </div>
                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="pointer">
                        <label>Pointer</label><br>
                        <div id="pointer" class="second">
                            <label>Visibility:</label>
                            <select class="tex" id="pointer_visibility">
                                <option value="default"></option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select><br>
                            <label>Crosshairs:</label>
                            <select class="tex" id="pointer_crosshairs">
                                <option value="default"></option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select><br>
                            <label>Length:</label>
                            <input class="nums" type="number" min="0" id="pointer_length" value="0.0"><br>
                            <label>Offset:</label>
                            <div class="third">
                                <label>x: </label>
                                <input class="nums" type="number" id="camera_pointer_offset_x"><br>
                                <label>y: </label>
                                <input class="nums" type="number" id="camera_pointer_offset_y"><br>
                                <label>z: </label>
                                <input class="nums" type="number" id="camera_pointer_offset_z"><br>
                            </div>
                        </div>

                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="boundaries">
                        <label>Boundaries</label><br>
                        <div class="second">
                            <label>xLimit:</label>
                            <div class="third">
                                <label>min:</label>
                                <input class="nums" type="number" id="boundaries_xLimit_min"><br>
                                <label>max:</label>
                                <input class="nums" type="number" id="boundaries_xLimit_max"><br>
                            </div>
                            <label>yLimit:</label>
                            <div class="third">
                                <label>min:</label>
                                <input class="nums" type="number" id="boundaries_yLimit_min"><br>
                                <label>max:</label>
                                <input class="nums" type="number" id="boundaries_yLimit_max"><br>
                            </div>
                            <label>zLimit:</label>
                            <div class="third">
                                <label>min:</label>
                                <input class="nums" type="number" id="boundaries_zLimit_min"><br>
                                <label>max:</label>
                                <input class="nums" type="number" id="boundaries_zLimit_max"><br>
                            </div>
                        </div>

                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="camera">
                        <label>Camera</label><br>
                        <div class="second">
                            <label>Pose:</label>
                            <div class="third">
                                <label>Position:</label>
                                <div class="fourth">
                                    <label>x: </label>
                                    <input class="nums" type="number" id="camera_pose_position_x"><br>
                                    <label>y: </label>
                                    <input class="nums" type="number" id="camera_pose_position_y"><br>
                                    <label>z: </label>
                                    <input class="nums" type="number" id="camera_pose_position_z"><br>
                                </div>

                                <label>Orientation:</label>
                                <div class="fourth">
                                    <label>Camera Orientation:</label>
                                    <select class="tex" id="camera_orientation">
                                        <option value="q">Quaternion</option>
                                        <option value="ang">Angle Axis</option>
                                        <option value="rot">Rotation Matrix</option>
                                        <option value="ypr">Yaw Pitch Roll</option>
                                    </select><br>
                                    <div class="fifth">
                                        <div id="camera_quaternion">
                                            <label>x: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_qx"><br>
                                            <label>y: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_qy"><br>
                                            <label>z: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_qz"><br>
                                            <label>w: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_qw"><br> 
                                        </div>
                                        <div id="camera_angleAxis">
                                            <label>Angle: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_angle"><br>
                                            <label>Axis: </label>
                                            <div class="fifth">
                                                <label>x: </label>
                                                <input class="nums" type="number" id="camera_pose_orientation_axis_x"><br>
                                                <label>y: </label>
                                                <input class="nums" type="number" id="camera_pose_orientation_axis_y"><br>
                                                <label>z: </label>
                                                <input class="nums" type="number" id="camera_pose_orientation_axis_z"><br>
                                            </div>
                                        </div>
                                        <div id="camera_ypr">
                                            <label>Yaw: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_yaw"><br>
                                            <label>Pitch: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_pitch"><br>
                                            <label>Roll: </label>
                                            <input class="nums" type="number" id="camera_pose_orientation_roll"><br>
                                        </div>
                                        <div id="camera_rotMatrix">
                                           <div class="fifth">
                                               <label>xx</label>
                                               <input class="nums" type="number" id="camera_pose_orientation_xx"><br>
                                               <label>xy </label>
                                               <input class="nums" type="number" id="camera_pose_orientation_xy"><br>
                                               <label>xz </label>
                                               <input class="nums" type="number" id="camera_pose_orientation_xz"><br>
                                               <label>yx</label>
                                               <input class="nums" type="number" id="camera_pose_orientation_yx"><br>
                                               <label>yy </label>
                                               <input class="nums" type="number" id="camera_pose_orientation_yy"><br>
                                               <label>yz </label>
                                               <input class="nums" type="number" id="camera_pose_orientation_yz"><br>
                                               <label>zx</label>
                                               <input class="nums" type="number" id="camera_pose_orientation_zx"><br>
                                               <label>zy </label>
                                               <input class="nums" type="number" id="camera_pose_orientation_zy"><br>
                                               <label>zz </label>
                                               <input class="nums" type="number" id="camera_pose_orientation_zz"><br>
                                           </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="second">
                            <label>Clipping:</label>
                            <div class="third">
                                <label>Near:</label>
                                <input class="nums" type="number" id="camera_clipping_near"><br>
                                <label>Far:</label>
                                <input class="nums" type="number" id="camera_clipping_far"><br>
                            </div>
                        </div>
                        <div class="second">
                            <label>Fov:</label>
                            <input class="nums" type="number" id="camera_fov">
                        </div>

                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="browserStartPage">
                        <label>Browser Start Page</label><br>
                        <div class="second">
                            <label>url:</label>
                            <input type="text" class="tex" id="browserStartPage_url">
                        </div>
                    </div>
                    <!--FIRST-->
                    <div class="first hidden" id="presentation">
                        <label>Presentation</label><br>
                        <div class="second">
                            <label>File name:</label>
                            <input type="text" class="tex" id="presentation_fileName"><br>
                            <label>Enabled:</label>
                            <select class="tex" id="presentation_enabled">
                                <option value="default"></option>
                                <option value="true">True</option>
                                <option value="false">False</option>
                            </select><br>
                        </div>
                    </div>
                </div>

                <div class="first hidden" id="content">
                    --coming soon--
                </div>

            </div>

        </div>
    </div>
    <footer>
        <div id="dNd-buttons">
            <button class="btn btn-primary btn-lg" id="submit">Generate and Download Room File</button>
        </div>
    </footer>
</body>


</html>



<script type="text/javascript">
    var room = {};
    var data = "";
    var xhr = new XMLHttpRequest();
    $(function () {
       
       // $('#settings').addClass('hidden');
        //$('#jstree').addClass('hidden');
        xhr.open('post', '/builder');
        xhr.send('valasztVarok');
        xhr.onloadend = function () {
            $('#plane').removeClass('hidden').addClass('shown');
            $('#jstree').removeClass('hidden').addClass('shown');
            console.log("A room tartalma: " + room);
            room = JSON.parse(xhr.response);
 
            Initialing();
            GetSettingsObject();
            $('#camera_ypr').removeClass('shown').addClass('hidden');
            $('#camera_angleAxis').removeClass('shown').addClass('hidden');
            $('#camera_rotMatrix').removeClass('shown').addClass('hidden');
        };
        

        var genRoomButton = document.getElementById("submit");
        $('#jstree').jstree({
            'core': {
                'data': [
                   { "id": "ajson1", "parent": "#", "text": "room" },
                   { "id": "ajson2", "parent": "ajson1", "text": "Settings" },
                   { "id": "ajson3", "parent": "ajson2", "text": "Environment" },
                   { "id": "ajson4", "parent": "ajson2", "text": "Pointer" },
                   { "id": "ajson5", "parent": "ajson2", "text": "Boundaries" },
                   { "id": "ajson6", "parent": "ajson2", "text": "Camera" },
                   { "id": "ajson7", "parent": "ajson2", "text": "Browser Start Page" },
                   { "id": "ajson8", "parent": "ajson2", "text": "Presentation" },
                   { "id": "ajson9", "parent": "ajson1", "text": "Content" }
                ]
            }
        });
        $('#jstree').on('changed.jstree', function (e, data) {
            console.log("Changed");
            
            switch (data.node.text) {
                case 'room': $('#RN').removeClass('hidden').addClass('shown');
                    break;
                case 'Settings':
                    $('#environment').removeClass("hidden").addClass("shown");
                    $('#pointer').removeClass("hidden").addClass("shown");
                    $('#boundaries').removeClass("hidden").addClass("shown");
                    $('#camera').removeClass("hidden").addClass("shown");
                    $('#browserStartPage').removeClass("hidden").addClass("shown");
                    $('#presentation').removeClass("hidden").addClass("shown");
                    break;
                case 'Environment': $('#environment').removeClass("hidden").addClass("shown");
                    break;
                case 'Pointer': $('#pointer').removeClass("hidden").addClass("shown");
                    break;
                case 'Boundaries': $('#boundaries').removeClass("hidden").addClass("shown");
                    break;
                case 'Camera': $('#camera').removeClass("hidden").addClass("shown");
                    break;
                case 'Browser Start Page': $('#browserStartPage').removeClass("hidden").addClass("shown");
                    break;
                case 'Presentation': $('#presentation').removeClass("hidden").addClass("shown");
                    break;
                case 'Content': $('#content').removeClass("hidden").addClass("shown");
                    break
               
            }
            $('#camera_orientation').change(function () {

                if ($('#camera_orientation').val() == 'q') {
                    $('#camera_quaternion').removeClass('hidden').addClass('shown');
                    $('#camera_angleAxis').removeClass('shown').addClass('hidden');
                    $('#camera_ypr').removeClass('shown').addClass('hidden');
                    $('#camera_rotMatrix').removeClass('shown').addClass('hidden');
                }
                else if ($('#camera_orientation').val() == 'rot') {
                    $('#camera_quaternion').removeClass('shown').addClass('hidden');
                    $('#camera_angleAxis').removeClass('shown').addClass('hidden');
                    $('#camera_ypr').removeClass('shown').addClass('hidden');
                    $('#camera_rotMatrix').removeClass('hidden').addClass('shown');
                }
                else if ($('#camera_orientation').val() == 'ypr') {
                    $('#camera_quaternion').removeClass('shown').addClass('hidden');
                    $('#camera_angleAxis').removeClass('shown').addClass('hidden');
                    $('#camera_ypr').removeClass('hidden').addClass('shown');
                    $('#camera_rotMatrix').removeClass('shown').addClass('hidden');
                }
                else if ($('#camera_orientation').val() == 'ang') {
                    $('#camera_quaternion').removeClass('shown').addClass('hidden');
                    $('#camera_angleAxis').removeClass('hidden').addClass('shown');
                    $('#camera_ypr').removeClass('shown').addClass('hidden');
                    $('#camera_rotMatrix').removeClass('shown').addClass('hidden');
                }

            });
                

        });
        genRoomButton.onclick = function () {
            GetSettingsObject();
            xhr = new XMLHttpRequest();
            var formdata = new FormData();
            formdata.append('room', JSON.stringify(room));
            xhr.open('post', '/roomgenerator');
            xhr.send(formdata);
            xhr.onloadend = function () {
                data = xhr.responseText;
                download(room.roomName + ".room", data);
            };

        };
        $('#jstree').on('select_node.jstree', function (e, data) {
            console.log("Selected");
            HideAll();

        });
       
    });

    function Initialing() {
        //----------------roomName-------------------
        $('#roomName').val(room.roomName);
        //-----------------environment----------------
        if (room.settings.environment.skybox != undefined) {
            $('#environment_skybox_materialName').val(room.settings.environment.skybox.materialName);
            $('#environment_skybox_distance').val(room.settings.environment.skybox.distance);
        }
        $('#environment_ambientColor_r').val(room.settings.environment.ambientColor.r);
        $('#environment_ambientColor_g').val(room.settings.environment.ambientColor.g);
        $('#environment_ambientColor_b').val(room.settings.environment.ambientColor.b);
        $('#environment_ambientColor_a').val(room.settings.environment.ambientColor.a);
        $('#environment_backgroundColor_r').val(room.settings.environment.backgroundColor.r);
        $('#environment_backgroundColor_g').val(room.settings.environment.backgroundColor.g);
        $('#environment_backgroundColor_b').val(room.settings.environment.backgroundColor.b);
        $('#environment_backgroundColor_a').val(room.settings.environment.backgroundColor.a);
        $('#environment_runtimeShaderSystem').val(room.settings.environment.runtimeshadersystem);
        $('#environment_shadow').val(room.settings.environment.shadow);
        $('#environment_compositors_bloom').val(room.settings.environment.compositors.Bloom);
        $('#environment_compositors_motionBlur').val(room.settings.environment.compositors.MotionBlur);
        $('#environment_fog_type').val(room.settings.environment.fog.type);
        $('#environment_fog_color_r').val(room.settings.environment.fog.color.r);
        $('#environment_fog_color_g').val(room.settings.environment.fog.color.g);
        $('#environment_fog_color_b').val(room.settings.environment.fog.color.b);
        $('#environment_fog_color_a').val(room.settings.environment.fog.color.a);
        $('#environment_fog_linearStart').val(room.settings.environment.fog.linearStart);
        $('#environment_fog_linearStop').val(room.settings.environment.fog.linearStop);
        $('#environment_fog_expDensity').val(room.settings.environment.fog.expDensity);
        //-----------------pointer----------------
        $('#pointer_visibility').val(room.settings.pointer.visibility);
        $('#pointer_crosshairs').val(room.settings.pointer.crosshairs);
        $('#pointer_length').val(room.settings.pointer.length);
        if (room.settings.pointer.offset != undefined) {
            $('#camera_pointer_offset_x').val(room.settings.pointer.offset.x);
            $('#camera_pointer_offset_y').val(room.settings.pointer.offset.y);
            $('#camera_pointer_offset_z').val(room.settings.pointer.offset.z);
        }
        //-----------------boundaries----------------
        $('#boundaries_xLimit_min').val(room.settings.boundaries.xlimit.min);
        $('#boundaries_xLimit_max').val(room.settings.boundaries.xlimit.max);
        $('#boundaries_yLimit_min').val(room.settings.boundaries.ylimit.min);
        $('#boundaries_yLimit_max').val(room.settings.boundaries.ylimit.max);
        $('#boundaries_zLimit_min').val(room.settings.boundaries.zlimit.min);
        $('#boundaries_zLimit_max').val(room.settings.boundaries.zlimit.max);
        //-----------------camera----------------
        $('#camera_pose_position_x').val(room.settings.camera.pose.position.x);
        $('#camera_pose_position_y').val(room.settings.camera.pose.position.y);
        $('#camera_pose_position_z').val(room.settings.camera.pose.position.z);
        $('#camera_pose_orientation_qx').val(room.settings.camera.pose.orientation.quaternion.x);
        $('#camera_pose_orientation_qy').val(room.settings.camera.pose.orientation.quaternion.y);
        $('#camera_pose_orientation_qz').val(room.settings.camera.pose.orientation.quaternion.z);
        $('#camera_pose_orientation_qw').val(room.settings.camera.pose.orientation.quaternion.w);
        $('#camera_clipping_near').val(room.settings.camera.clipping.far);
        $('#camera_clipping_far').val(room.settings.camera.clipping.far);
        $('#camera_fov').val(room.settings.camera.fov);
        //-----------------browserStartPage----------------
        $('#browserStartPage_url').val(room.settings.browserStartPage.url);
        //-----------------presentation----------------
        if (room.settings.presentation != undefined) {
            $('#presentation_fileName').val(room.settings.presentation.fileName);
            $('#presentation_enabled').val(room.settings.presentation.enabled);
        }



    }
    function HideAll() {
        $('#RN').removeClass("shown").addClass("hidden");
        $('#environment').removeClass("shown").addClass("hidden");
        $('#pointer').removeClass("shown").addClass("hidden");
        $('#boundaries').removeClass("shown").addClass("hidden");
        $('#camera').removeClass("shown").addClass("hidden");
        $('#browserStartPage').removeClass("shown").addClass("hidden");
        $('#presentation').removeClass("shown").addClass("hidden");
        $('#content').removeClass("shown").addClass("hidden");
    }

    function GetSettingsObject() {
        room.roomName = $('#roomName').val();
        //-----------------environment----------------
        if (room.settings.environment.skybox != undefined) {
            room.settings.environment.skybox.materialName = $('#environment_skybox_materialName').val();
            room.settings.environment.skybox.distance = $('#environment_skybox_distance').val();
        }
        else {
            room.settings.environment.skybox = {};
            room.settings.environment.skybox.materialName = $('#environment_skybox_materialName').val();
            room.settings.environment.skybox.distance = $('#environment_skybox_distance').val();
        }
        room.settings.environment.ambientColor.r = $('#environment_ambientColor_r').val();
        room.settings.environment.ambientColor.g = $('#environment_ambientColor_g').val();
        room.settings.environment.ambientColor.b = $('#environment_ambientColor_b').val();
        room.settings.environment.ambientColor.a = $('#environment_ambientColor_a').val();
        room.settings.environment.backgroundColor.r = $('#environment_backgroundColor_r').val();
        room.settings.environment.backgroundColor.g = $('#environment_backgroundColor_g').val();
        room.settings.environment.backgroundColor.b = $('#environment_backgroundColor_b').val();
        room.settings.environment.backgroundColor.a = $('#environment_backgroundColor_a').val();
        room.settings.environment.runtimeshadersystem = $('#environment_runtimeShaderSystem').val();
        room.settings.environment.shadow = $('#environment_shadow').val();
        room.settings.environment.compositors.Bloom = $('#environment_compositors_bloom').val();
        room.settings.environment.compositors.MotionBlur = $('#environment_compositors_motionBlur').val();
        room.settings.environment.fog.type = $('#environment_fog_type').val();
        room.settings.environment.fog.color.r = $('#environment_fog_color_r').val();
        room.settings.environment.fog.color.g = $('#environment_fog_color_g').val();
        room.settings.environment.fog.color.b = $('#environment_fog_color_b').val();
        room.settings.environment.fog.color.a = $('#environment_fog_color_a').val();
        room.settings.environment.fog.linearStart =  $('#environment_fog_linearStart').val();
        room.settings.environment.fog.linearStop = $('#environment_fog_linearStop').val();
        room.settings.environment.fog.expDensity = $('#environment_fog_expDensity').val();
        //-----------------pointer----------------
        room.settings.pointer.visibility = $('#pointer_visibility').val();
        room.settings.pointer.crosshairs = $('#pointer_crosshairs').val();
        room.settings.pointer.length = $('#pointer_length').val();
        room.settings.pointer.offset.x = $('#camera_pointer_offset_x').val();
        room.settings.pointer.offset.y = $('#camera_pointer_offset_y').val();
        room.settings.pointer.offset.z = $('#camera_pointer_offset_z').val();
        //-----------------boundaries----------------
        room.settings.boundaries.xlimit.min = $('#boundaries_xLimit_min').val();
        room.settings.boundaries.xlimit.max= $('#boundaries_xLimit_max').val();
        room.settings.boundaries.ylimit.min=  $('#boundaries_yLimit_min').val();
        room.settings.boundaries.ylimit.max= $('#boundaries_yLimit_max').val();
        room.settings.boundaries.zlimit.min = $('#boundaries_zLimit_min').val();
        room.settings.boundaries.zlimit.max=  $('#boundaries_zLimit_max').val();
        //-----------------camera----------------
        room.settings.camera.pose.position.x = $('#camera_pose_position_x').val();
        room.settings.camera.pose.position.y = $('#camera_pose_position_y').val();
        room.settings.camera.pose.position.z = $('#camera_pose_position_z').val();
        room.settings.camera.pose.orientation.quaternion.x = $('#camera_pose_orientation_qx').val();
        room.settings.camera.pose.orientation.quaternion.y = $('#camera_pose_orientation_qy').val();
        room.settings.camera.pose.orientation.quaternion.z = $('#camera_pose_orientation_qz').val();
        room.settings.camera.pose.orientation.quaternion.w = $('#camera_pose_orientation_qw').val();
        room.settings.camera.clipping.far = $('#camera_clipping_near').val();
        room.settings.camera.clipping.far = $('#camera_clipping_far').val();
        room.settings.camera.fov = $('#camera_fov').val();
        //-----------------browserStartPage----------------
        room.settings.browserStartPage.url = $('#browserStartPage_url').val();
        //-----------------presentation----------------
        room.settings.presentation.fileName = $('#presentation_fileName').val();
        room.settings.presentation.enabled = $('#presentation_enabled').val();
    }

    function download(filename, text) {
        var pom = document.createElement('a');
        pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        pom.setAttribute('download', filename);

        if (document.createEvent) {
            var event = document.createEvent('MouseEvents');
            event.initEvent('click', true, true);
            pom.dispatchEvent(event);
        }
        else {
            pom.click();
        }
    }
</script>